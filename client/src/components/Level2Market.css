/* Level 2 Market Data Component */
.l2-wrapper {
  padding: 1rem 1.5rem 2rem;
  font-family: 'Inter', 'Segoe UI', system-ui, sans-serif;
  color: #e2e8f0;
  background: #0f172a;
  min-height: 100vh;
}

/* ── Header ─────────────────────────────────────────────────── */
.l2-header { margin-bottom: 1rem; }

.l2-title-row {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  margin-bottom: 0.75rem;
}
.l2-title {
  margin: 0;
  font-size: 1.2rem;
  font-weight: 700;
  color: #f8fafc;
}
.l2-refresh-badge {
  background: #1e293b;
  border: 1px solid #334155;
  color: #94a3b8;
  font-size: 0.75rem;
  padding: 0.2rem 0.55rem;
  border-radius: 999px;
  font-variant-numeric: tabular-nums;
}
.l2-refresh-btn {
  background: #1e293b;
  border: 1px solid #334155;
  color: #94a3b8;
  font-size: 0.75rem;
  padding: 0.2rem 0.65rem;
  border-radius: 6px;
  cursor: pointer;
  transition: background 0.15s;
}
.l2-refresh-btn:hover { background: #334155; color: #e2e8f0; }

.l2-watchlist-row {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 0.4rem;
}
.l2-chip {
  display: flex;
  align-items: center;
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 6px;
  font-size: 0.8rem;
  font-weight: 600;
  overflow: hidden;
  cursor: pointer;
  transition: background 0.15s, border-color 0.15s;
}
.l2-chip span { padding: 0.25rem 0.55rem; color: #94a3b8; }
.l2-chip.active { background: #0ea5e9; border-color: #0ea5e9; }
.l2-chip.active span { color: #fff; }
.l2-chip:hover:not(.active) { border-color: #0ea5e9; }
.l2-chip-remove {
  background: none;
  border: none;
  color: #64748b;
  padding: 0 0.4rem;
  cursor: pointer;
  font-size: 1rem;
  line-height: 1;
}
.l2-chip-remove:hover { color: #ef4444; }

.l2-add-row { display: flex; align-items: center; gap: 0.35rem; }
.l2-add-input {
  background: #1e293b;
  border: 1px solid #334155;
  color: #e2e8f0;
  font-size: 0.8rem;
  padding: 0.28rem 0.55rem;
  border-radius: 6px;
  width: 100px;
  outline: none;
  text-transform: uppercase;
}
.l2-add-input:focus { border-color: #0ea5e9; }
.l2-add-btn {
  background: #0ea5e9;
  border: none;
  color: #fff;
  font-size: 1rem;
  font-weight: 700;
  padding: 0.2rem 0.6rem;
  border-radius: 6px;
  cursor: pointer;
  transition: background 0.15s;
}
.l2-add-btn:hover { background: #0284c7; }
.l2-add-btn:disabled { background: #334155; cursor: default; }
.l2-add-error { color: #f87171; font-size: 0.75rem; }

/* ── Loading / Error ────────────────────────────────────────── */
.l2-loading {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  color: #94a3b8;
  padding: 2rem;
}
.l2-spinner {
  width: 20px; height: 20px;
  border: 2px solid #334155;
  border-top-color: #0ea5e9;
  border-radius: 50%;
  animation: l2spin 0.7s linear infinite;
}
@keyframes l2spin { to { transform: rotate(360deg); } }
.l2-error {
  background: #450a0a;
  border: 1px solid #7f1d1d;
  color: #fca5a5;
  padding: 0.75rem 1rem;
  border-radius: 8px;
  margin-bottom: 1rem;
}

/* ── Body ───────────────────────────────────────────────────── */
.l2-body { display: flex; flex-direction: column; gap: 0.9rem; }

/* ── Price Panel ────────────────────────────────────────────── */
.l2-price-panel {
  display: flex;
  gap: 1.5rem;
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 12px;
  padding: 1rem 1.25rem;
}
.l2-price-left { min-width: 160px; }
.l2-sym-name { font-size: 0.85rem; color: #94a3b8; margin-bottom: 0.1rem; }
.l2-sym-ticker { font-size: 0.8rem; font-weight: 700; color: #0ea5e9; margin-bottom: 0.4rem; letter-spacing: 0.05em; }
.l2-price { font-size: 2rem; font-weight: 700; color: #f8fafc; line-height: 1; }
.l2-change { font-size: 0.9rem; font-weight: 600; margin-top: 0.35rem; }
.l2-change.pos { color: #22c55e; }
.l2-change.neg { color: #ef4444; }

.l2-price-right { flex: 1; display: flex; flex-direction: column; gap: 0.5rem; }
.l2-sparkline {
  width: 100%;
  height: 56px;
  display: block;
  border-radius: 6px;
  background: #0f172a;
}
.l2-meta-grid {
  display: grid;
  grid-template-columns: auto 1fr auto 1fr;
  gap: 0.2rem 1rem;
  font-size: 0.78rem;
}
.l2-meta-grid span { color: #64748b; }
.l2-meta-grid strong { color: #cbd5e1; font-weight: 600; }
.l2-meta-grid strong.green { color: #22c55e; }
.l2-meta-grid strong.red { color: #ef4444; }

/* ── Signal Panel ───────────────────────────────────────────── */
.l2-signal-panel {
  border-radius: 12px;
  padding: 1rem 1.25rem;
  border: 1px solid #334155;
}
.l2-signal-panel.strong-buy  { background: linear-gradient(135deg, #052e16 0%, #14532d 100%); border-color: #15803d; }
.l2-signal-panel.buy         { background: linear-gradient(135deg, #0a1628 0%, #0d2f1e 100%); border-color: #166534; }
.l2-signal-panel.hold        { background: #1e293b; border-color: #334155; }
.l2-signal-panel.sell        { background: linear-gradient(135deg, #1c0a0a 0%, #2f0d0d 100%); border-color: #991b1b; }
.l2-signal-panel.strong-sell { background: linear-gradient(135deg, #3b0404 0%, #450a0a 100%); border-color: #7f1d1d; }

.l2-signal-main {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  margin-bottom: 0.6rem;
}
.l2-signal-action {
  font-size: 1.4rem;
  font-weight: 800;
  letter-spacing: 0.04em;
}
.strong-buy  .l2-signal-action, .buy  .l2-signal-action  { color: #22c55e; }
.hold        .l2-signal-action                            { color: #94a3b8; }
.strong-sell .l2-signal-action, .sell .l2-signal-action  { color: #f87171; }

.l2-signal-conf  { font-size: 0.8rem; color: #94a3b8; background: #0f172a; padding: 0.15rem 0.5rem; border-radius: 999px; }
.l2-signal-score { font-size: 0.85rem; font-weight: 700; color: #cbd5e1; margin-left: auto; }

.l2-signal-reasons { display: flex; flex-wrap: wrap; gap: 0.35rem; margin-bottom: 0.75rem; }
.l2-reason-pill {
  background: rgba(255,255,255,0.07);
  border: 1px solid rgba(255,255,255,0.1);
  color: #cbd5e1;
  font-size: 0.72rem;
  padding: 0.15rem 0.5rem;
  border-radius: 999px;
}

.l2-indicators {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem 1.5rem;
  margin-bottom: 0.75rem;
}
.l2-ind { display: flex; flex-direction: column; align-items: center; }
.l2-ind span { font-size: 0.68rem; color: #64748b; text-transform: uppercase; }
.l2-ind strong { font-size: 0.85rem; font-weight: 700; }
.l2-ind strong.green { color: #22c55e; }
.l2-ind strong.red   { color: #ef4444; }

.l2-pressure-bar { display: flex; align-items: center; gap: 0.5rem; font-size: 0.75rem; font-weight: 600; }
.l2-pressure-bar .green { color: #22c55e; min-width: 80px; }
.l2-pressure-bar .red   { color: #ef4444; min-width: 60px; text-align: right; }
.l2-bar-track { flex: 1; height: 8px; background: #ef4444; border-radius: 999px; overflow: hidden; }
.l2-bar-fill  { height: 100%; background: #22c55e; border-radius: 999px; transition: width 0.4s ease; }

/* ── Order Entry ────────────────────────────────────────────── */
.l2-order-entry {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 12px;
  padding: 0.85rem 1.25rem;
}
.l2-oe-title { margin: 0 0 0.6rem; font-size: 0.85rem; font-weight: 700; color: #f8fafc; }
.l2-oe-row {
  display: flex;
  align-items: center;
  flex-wrap: wrap;
  gap: 0.4rem 0.75rem;
  margin-bottom: 0.6rem;
}
.l2-oe-row label { font-size: 0.75rem; color: #94a3b8; }
.l2-oe-select, .l2-oe-input {
  background: #0f172a;
  border: 1px solid #334155;
  color: #e2e8f0;
  font-size: 0.8rem;
  padding: 0.25rem 0.5rem;
  border-radius: 6px;
  outline: none;
}
.l2-oe-input { width: 80px; }
.l2-oe-select:focus, .l2-oe-input:focus { border-color: #0ea5e9; }

.l2-oe-btns { display: flex; gap: 0.75rem; }
.l2-buy-btn, .l2-sell-btn {
  flex: 1;
  padding: 0.5rem 1rem;
  font-size: 0.85rem;
  font-weight: 700;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  transition: opacity 0.15s, transform 0.12s;
  letter-spacing: 0.03em;
}
.l2-buy-btn  { background: #16a34a; color: #fff; }
.l2-buy-btn:hover  { background: #15803d; }
.l2-sell-btn { background: #dc2626; color: #fff; }
.l2-sell-btn:hover { background: #b91c1c; }
.l2-buy-btn:active, .l2-sell-btn:active { transform: scale(0.97); }

/* ── Tabs ───────────────────────────────────────────────────── */
.l2-tabs { display: flex; gap: 0; border-bottom: 1px solid #334155; }
.l2-tab {
  background: none;
  border: none;
  color: #64748b;
  font-size: 0.85rem;
  font-weight: 600;
  padding: 0.55rem 1.1rem;
  cursor: pointer;
  border-bottom: 2px solid transparent;
  transition: color 0.15s;
}
.l2-tab.active { color: #0ea5e9; border-bottom-color: #0ea5e9; }
.l2-tab:hover:not(.active) { color: #94a3b8; }
.l2-badge {
  background: #0ea5e9;
  color: #fff;
  font-size: 0.65rem;
  padding: 0.05rem 0.35rem;
  border-radius: 999px;
  margin-left: 0.35rem;
  font-weight: 700;
}

/* ── Order Book ─────────────────────────────────────────────── */
.l2-book {
  display: grid;
  grid-template-columns: 1fr auto 1fr;
  gap: 0;
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 12px;
  overflow: hidden;
  margin-top: 0.1rem;
}
.l2-book-side { overflow: hidden; }
.l2-book-header {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  font-size: 0.68rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  color: #64748b;
  padding: 0.4rem 0.6rem;
  border-bottom: 1px solid #334155;
  background: #0f172a;
}
.bids .l2-book-header span:last-child  { text-align: right; }
.asks .l2-book-header span             { text-align: right; }
.asks .l2-book-header span:first-child { text-align: left; }

.l2-book-row {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  font-size: 0.78rem;
  padding: 0.22rem 0.6rem;
  position: relative;
  transition: background 0.1s;
}
.l2-book-row:hover { background: rgba(255,255,255,0.04); }
.l2-depth-bar {
  position: absolute;
  top: 0; bottom: 0;
  opacity: 0.12;
  pointer-events: none;
}
.bid-depth { background: #22c55e; right: 0; }
.ask-depth { background: #ef4444; left: 0; }

.l2-cell { position: relative; z-index: 1; line-height: 1.6; }
.bids .l2-cell:last-child  { text-align: right; }
.asks .l2-cell              { text-align: right; }
.asks .l2-cell:first-child  { text-align: left; }

.bid-price { color: #22c55e; font-weight: 700; }
.ask-price { color: #ef4444; font-weight: 700; }
.green     { color: #22c55e; }
.red       { color: #ef4444; }

.l2-book-spread {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  width: 84px;
  border-left: 1px solid #334155;
  border-right: 1px solid #334155;
  background: #0f172a;
  font-size: 0.72rem;
  color: #64748b;
  gap: 0.1rem;
  padding: 0 0.5rem;
}
.l2-book-spread strong { color: #f8fafc; font-size: 0.8rem; font-weight: 700; }

/* ── My Orders ──────────────────────────────────────────────── */
.l2-orders-panel {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 12px;
  overflow: hidden;
  margin-top: 0.1rem;
}
.l2-orders-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0.5rem 0.85rem;
  background: #0f172a;
  border-bottom: 1px solid #334155;
  font-size: 0.78rem;
  color: #94a3b8;
}
.l2-clear-btn {
  background: #334155;
  border: none;
  color: #94a3b8;
  font-size: 0.72rem;
  padding: 0.2rem 0.6rem;
  border-radius: 5px;
  cursor: pointer;
}
.l2-clear-btn:hover { background: #475569; color: #e2e8f0; }
.l2-orders-empty { padding: 1.5rem; text-align: center; color: #475569; font-size: 0.85rem; }

.l2-orders-list { display: flex; flex-direction: column; }
.l2-order-row {
  display: flex;
  align-items: center;
  gap: 0.6rem 1rem;
  flex-wrap: wrap;
  padding: 0.45rem 0.85rem;
  border-bottom: 1px solid #1e293b;
  font-size: 0.78rem;
  position: relative;
}
.l2-order-row.cancelled { opacity: 0.45; }
.l2-order-row:last-child { border-bottom: none; }

.l2-order-side  { font-weight: 800; min-width: 36px; }
.l2-order-sym   { font-weight: 700; color: #0ea5e9; }
.l2-order-qty   { color: #94a3b8; }
.l2-order-price { font-weight: 700; color: #e2e8f0; }
.l2-order-type  { color: #64748b; font-size: 0.72rem; background: #0f172a; padding: 0.1rem 0.4rem; border-radius: 4px; }
.l2-order-time  { color: #475569; font-size: 0.72rem; margin-left: auto; }

.l2-order-status { font-size: 0.7rem; font-weight: 700; padding: 0.1rem 0.45rem; border-radius: 4px; }
.l2-order-status.filled    { background: #14532d; color: #4ade80; }
.l2-order-status.pending   { background: #1c3252; color: #7dd3fc; }
.l2-order-status.cancelled { background: #1e293b; color: #64748b; }

.l2-cancel-btn {
  background: #450a0a;
  border: 1px solid #7f1d1d;
  color: #fca5a5;
  font-size: 0.7rem;
  padding: 0.15rem 0.5rem;
  border-radius: 5px;
  cursor: pointer;
}
.l2-cancel-btn:hover { background: #7f1d1d; }

/* ── Footer ─────────────────────────────────────────────────── */
.l2-footer {
  font-size: 0.7rem;
  color: #475569;
  text-align: center;
  padding: 0.5rem 0;
}

/* ── Responsive ─────────────────────────────────────────────── */
@media (max-width: 768px) {
  .l2-price-panel { flex-direction: column; }
  .l2-book { grid-template-columns: 1fr; }
  .l2-book-spread { display: none; }
  .l2-meta-grid { grid-template-columns: auto 1fr; }
}
